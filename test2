-- ══════════════════════════════════════════════════════════════════════
-- AZRIX CS:GO STYLED UI LIBRARY
-- ══════════════════════════════════════════════════════════════════════

local AzrixLibrary = {}
AzrixLibrary.__index = AzrixLibrary

-- Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local HttpService = game:GetService("HttpService")
local CoreGui = game:GetService("CoreGui")

local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()

-- ══════════════════════════════════════════════════════════════════════
-- CONFIGURATION
-- ══════════════════════════════════════════════════════════════════════

local Config = {
    ToggleKey = Enum.KeyCode.Insert,
    ConfigFolder = "AzrixConfigs",
    AutoLoadConfig = "default"
}

-- ══════════════════════════════════════════════════════════════════════
-- COLOR SCHEME (CS:GO INSPIRED)
-- ══════════════════════════════════════════════════════════════════════

local Colors = {
    -- Main Colors
    Background = Color3.fromRGB(17, 17, 17),
    BackgroundDark = Color3.fromRGB(12, 12, 12),
    BackgroundLight = Color3.fromRGB(25, 25, 25),
    
    -- Panel Colors
    Panel = Color3.fromRGB(22, 22, 22),
    PanelBorder = Color3.fromRGB(35, 35, 35),
    PanelHeader = Color3.fromRGB(28, 28, 28),
    
    -- Accent Colors
    Accent = Color3.fromRGB(170, 120, 50),
    AccentDark = Color3.fromRGB(140, 95, 35),
    AccentLight = Color3.fromRGB(200, 150, 70),
    
    -- Text Colors
    TextPrimary = Color3.fromRGB(220, 220, 220),
    TextSecondary = Color3.fromRGB(150, 150, 150),
    TextDisabled = Color3.fromRGB(80, 80, 80),
    
    -- Interactive Colors
    Toggle = Color3.fromRGB(45, 45, 45),
    ToggleEnabled = Color3.fromRGB(170, 120, 50),
    Slider = Color3.fromRGB(35, 35, 35),
    SliderFill = Color3.fromRGB(170, 120, 50),
    
    -- Input Colors
    Input = Color3.fromRGB(30, 30, 30),
    InputBorder = Color3.fromRGB(50, 50, 50),
    InputFocused = Color3.fromRGB(170, 120, 50),
    
    -- Dropdown Colors
    Dropdown = Color3.fromRGB(28, 28, 28),
    DropdownHover = Color3.fromRGB(35, 35, 35),
    
    -- Tab Colors
    TabInactive = Color3.fromRGB(25, 25, 25),
    TabActive = Color3.fromRGB(35, 35, 35),
    TabHover = Color3.fromRGB(30, 30, 30),
    
    -- Misc
    Divider = Color3.fromRGB(40, 40, 40),
    Shadow = Color3.fromRGB(0, 0, 0),
    Success = Color3.fromRGB(75, 175, 100),
    Error = Color3.fromRGB(200, 75, 75),
    Warning = Color3.fromRGB(200, 175, 75)
}

-- ══════════════════════════════════════════════════════════════════════
-- UTILITY FUNCTIONS
-- ══════════════════════════════════════════════════════════════════════

local function CreateTween(object, duration, properties, style, direction)
    style = style or Enum.EasingStyle.Quad
    direction = direction or Enum.EasingDirection.Out
    return TweenService:Create(object, TweenInfo.new(duration, style, direction), properties)
end

local function Ripple(button, x, y)
    local ripple = Instance.new("Frame")
    ripple.Name = "Ripple"
    ripple.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    ripple.BackgroundTransparency = 0.85
    ripple.BorderSizePixel = 0
    ripple.Position = UDim2.new(0, x - button.AbsolutePosition.X, 0, y - button.AbsolutePosition.Y)
    ripple.Size = UDim2.new(0, 0, 0, 0)
    ripple.AnchorPoint = Vector2.new(0.5, 0.5)
    ripple.Parent = button
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(1, 0)
    corner.Parent = ripple
    
    local maxSize = math.max(button.AbsoluteSize.X, button.AbsoluteSize.Y) * 2
    
    CreateTween(ripple, 0.5, {
        Size = UDim2.new(0, maxSize, 0, maxSize),
        BackgroundTransparency = 1
    }):Play()
    
    task.delay(0.5, function()
        ripple:Destroy()
    end)
end

local function AddCorner(parent, radius)
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, radius or 4)
    corner.Parent = parent
    return corner
end

local function AddStroke(parent, color, thickness)
    local stroke = Instance.new("UIStroke")
    stroke.Color = color or Colors.PanelBorder
    stroke.Thickness = thickness or 1
    stroke.Parent = parent
    return stroke
end

local function AddPadding(parent, padding)
    local uiPadding = Instance.new("UIPadding")
    uiPadding.PaddingTop = UDim.new(0, padding)
    uiPadding.PaddingBottom = UDim.new(0, padding)
    uiPadding.PaddingLeft = UDim.new(0, padding)
    uiPadding.PaddingRight = UDim.new(0, padding)
    uiPadding.Parent = parent
    return uiPadding
end

local function AddListLayout(parent, padding, direction, alignment)
    local layout = Instance.new("UIListLayout")
    layout.Padding = UDim.new(0, padding or 4)
    layout.FillDirection = direction or Enum.FillDirection.Vertical
    layout.HorizontalAlignment = alignment or Enum.HorizontalAlignment.Left
    layout.SortOrder = Enum.SortOrder.LayoutOrder
    layout.Parent = parent
    return layout
end

-- ══════════════════════════════════════════════════════════════════════
-- LIBRARY CORE
-- ══════════════════════════════════════════════════════════════════════

AzrixLibrary.Windows = {}
AzrixLibrary.Flags = {}
AzrixLibrary.Connections = {}
AzrixLibrary.ToggleKey = Config.ToggleKey
AzrixLibrary.Visible = true
AzrixLibrary.ConfigFolder = Config.ConfigFolder
AzrixLibrary.AutoLoad = Config.AutoLoadConfig

-- Notification System
AzrixLibrary.Notifications = {}

function AzrixLibrary.Notifications:Create(options)
    options = options or {}
    local name = options.Name or "Notification"
    local lifetime = options.Lifetime or 3
    local type = options.Type or "Info"
    
    local notifContainer = AzrixLibrary._NotificationContainer
    if not notifContainer then return end
    
    local notif = Instance.new("Frame")
    notif.Name = "Notification"
    notif.BackgroundColor3 = Colors.Panel
    notif.BorderSizePixel = 0
    notif.Size = UDim2.new(1, 0, 0, 40)
    notif.Position = UDim2.new(1, 50, 0, 0)
    notif.Parent = notifContainer
    
    AddCorner(notif, 4)
    AddStroke(notif, Colors.PanelBorder)
    
    local accentBar = Instance.new("Frame")
    accentBar.Name = "AccentBar"
    accentBar.BackgroundColor3 = type == "Success" and Colors.Success or type == "Error" and Colors.Error or Colors.Accent
    accentBar.BorderSizePixel = 0
    accentBar.Size = UDim2.new(0, 3, 1, 0)
    accentBar.Parent = notif
    
    local leftCorner = Instance.new("UICorner")
    leftCorner.CornerRadius = UDim.new(0, 4)
    leftCorner.Parent = accentBar
    
    local text = Instance.new("TextLabel")
    text.Name = "Text"
    text.BackgroundTransparency = 1
    text.Position = UDim2.new(0, 15, 0, 0)
    text.Size = UDim2.new(1, -20, 1, 0)
    text.Font = Enum.Font.Gotham
    text.Text = name
    text.TextColor3 = Colors.TextPrimary
    text.TextSize = 13
    text.TextXAlignment = Enum.TextXAlignment.Left
    text.Parent = notif
    
    -- Animate in
    CreateTween(notif, 0.3, {Position = UDim2.new(0, 0, 0, 0)}):Play()
    
    -- Animate out and destroy
    task.delay(lifetime, function()
        local tweenOut = CreateTween(notif, 0.3, {Position = UDim2.new(1, 50, 0, 0)})
        tweenOut:Play()
        tweenOut.Completed:Connect(function()
            notif:Destroy()
        end)
    end)
end

-- ══════════════════════════════════════════════════════════════════════
-- CONFIG SYSTEM
-- ══════════════════════════════════════════════════════════════════════

function AzrixLibrary:SaveConfig(name)
    if not isfolder then return false end
    
    name = name or "default"
    local configPath = self.ConfigFolder .. "/" .. name .. ".json"
    
    if not isfolder(self.ConfigFolder) then
        makefolder(self.ConfigFolder)
    end
    
    local data = {}
    for flag, value in pairs(self.Flags) do
        if type(value) == "table" then
            if value.Color then
                data[flag] = {
                    Type = "Color",
                    R = value.Color.R,
                    G = value.Color.G,
                    B = value.Color.B,
                    Alpha = value.Alpha
                }
            elseif value.Key then
                data[flag] = {
                    Type = "Keybind",
                    Key = value.Key.Name,
                    Mode = value.Mode
                }
            else
                data[flag] = {
                    Type = "Table",
                    Value = value
                }
            end
        elseif typeof(value) == "Color3" then
            data[flag] = {
                Type = "Color3",
                R = value.R,
                G = value.G,
                B = value.B
            }
        else
            data[flag] = {
                Type = "Value",
                Value = value
            }
        end
    end
    
    local success, result = pcall(function()
        writefile(configPath, HttpService:JSONEncode(data))
    end)
    
    return success
end

function AzrixLibrary:LoadConfig(name)
    if not isfolder or not isfile then return false end
    
    name = name or "default"
    local configPath = self.ConfigFolder .. "/" .. name .. ".json"
    
    if not isfile(configPath) then return false end
    
    local success, data = pcall(function()
        return HttpService:JSONDecode(readfile(configPath))
    end)
    
    if not success then return false end
    
    for flag, info in pairs(data) do
        if self.Flags[flag] ~= nil then
            if info.Type == "Color" then
                self.Flags[flag] = {
                    Color = Color3.new(info.R, info.G, info.B),
                    Alpha = info.Alpha
                }
            elseif info.Type == "Keybind" then
                self.Flags[flag] = {
                    Key = Enum.KeyCode[info.Key] or Enum.KeyCode.None,
                    Mode = info.Mode
                }
            elseif info.Type == "Color3" then
                self.Flags[flag] = Color3.new(info.R, info.G, info.B)
            elseif info.Type == "Table" then
                self.Flags[flag] = info.Value
            else
                self.Flags[flag] = info.Value
            end
        end
    end
    
    return true
end

function AzrixLibrary:GetConfigs()
    if not isfolder or not listfiles then return {} end
    
    if not isfolder(self.ConfigFolder) then
        makefolder(self.ConfigFolder)
        return {}
    end
    
    local configs = {}
    for _, file in pairs(listfiles(self.ConfigFolder)) do
        local name = file:match("([^/\\]+)%.json$")
        if name then
            table.insert(configs, name)
        end
    end
    
    return configs
end

function AzrixLibrary:DeleteConfig(name)
    if not isfolder or not isfile or not delfile then return false end
    
    local configPath = self.ConfigFolder .. "/" .. name .. ".json"
    if isfile(configPath) then
        delfile(configPath)
        return true
    end
    return false
end

-- ══════════════════════════════════════════════════════════════════════
-- WINDOW CREATION
-- ══════════════════════════════════════════════════════════════════════

function AzrixLibrary:Window(options)
    options = options or {}
    local title = options.Title or "AZRIX"
    local subtitle = options.Subtitle or "CLIENT"
    local size = options.Size or UDim2.new(0, 700, 0, 520)
    
    local Window = {}
    Window.Tabs = {}
    Window.ActiveTab = nil
    
    -- Main ScreenGui
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "AzrixClient"
    screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    screenGui.ResetOnSpawn = false
    
    if syn and syn.protect_gui then
        syn.protect_gui(screenGui)
        screenGui.Parent = CoreGui
    elseif gethui then
        screenGui.Parent = gethui()
    else
        screenGui.Parent = CoreGui
    end
    
    -- Notification Container
    local notifContainer = Instance.new("Frame")
    notifContainer.Name = "NotificationContainer"
    notifContainer.BackgroundTransparency = 1
    notifContainer.Position = UDim2.new(1, -270, 0, 10)
    notifContainer.Size = UDim2.new(0, 260, 1, -20)
    notifContainer.Parent = screenGui
    
    AddListLayout(notifContainer, 8)
    AzrixLibrary._NotificationContainer = notifContainer
    
    -- Main Frame
    local mainFrame = Instance.new("Frame")
    mainFrame.Name = "MainFrame"
    mainFrame.BackgroundColor3 = Colors.Background
    mainFrame.BorderSizePixel = 0
    mainFrame.Position = UDim2.new(0.5, -size.X.Offset/2, 0.5, -size.Y.Offset/2)
    mainFrame.Size = size
    mainFrame.Parent = screenGui
    
    AddCorner(mainFrame, 6)
    
    local mainStroke = AddStroke(mainFrame, Colors.PanelBorder, 1)
    
    -- Shadow
    local shadow = Instance.new("ImageLabel")
    shadow.Name = "Shadow"
    shadow.BackgroundTransparency = 1
    shadow.Position = UDim2.new(0, -15, 0, -15)
    shadow.Size = UDim2.new(1, 30, 1, 30)
    shadow.ZIndex = -1
    shadow.Image = "rbxassetid://5554236805"
    shadow.ImageColor3 = Colors.Shadow
    shadow.ImageTransparency = 0.6
    shadow.ScaleType = Enum.ScaleType.Slice
    shadow.SliceCenter = Rect.new(23, 23, 277, 277)
    shadow.Parent = mainFrame
    
    -- Top Bar
    local topBar = Instance.new("Frame")
    topBar.Name = "TopBar"
    topBar.BackgroundColor3 = Colors.BackgroundDark
    topBar.BorderSizePixel = 0
    topBar.Size = UDim2.new(1, 0, 0, 50)
    topBar.Parent = mainFrame
    
    local topCorner = Instance.new("UICorner")
    topCorner.CornerRadius = UDim.new(0, 6)
    topCorner.Parent = topBar
    
    -- Fix bottom corners of top bar
    local topBarFix = Instance.new("Frame")
    topBarFix.Name = "CornerFix"
    topBarFix.BackgroundColor3 = Colors.BackgroundDark
    topBarFix.BorderSizePixel = 0
    topBarFix.Position = UDim2.new(0, 0, 1, -6)
    topBarFix.Size = UDim2.new(1, 0, 0, 6)
    topBarFix.Parent = topBar
    
    -- Title Container
    local titleContainer = Instance.new("Frame")
    titleContainer.Name = "TitleContainer"
    titleContainer.BackgroundTransparency = 1
    titleContainer.Position = UDim2.new(0, 15, 0, 0)
    titleContainer.Size = UDim2.new(0, 200, 1, 0)
    titleContainer.Parent = topBar
    
    local titleText = Instance.new("TextLabel")
    titleText.Name = "Title"
    titleText.BackgroundTransparency = 1
    titleText.Size = UDim2.new(1, 0, 1, 0)
    titleText.Font = Enum.Font.GothamBold
    titleText.Text = title
    titleText.TextColor3 = Colors.Accent
    titleText.TextSize = 16
    titleText.TextXAlignment = Enum.TextXAlignment.Left
    titleText.Parent = titleContainer
    
    local subtitleText = Instance.new("TextLabel")
    subtitleText.Name = "Subtitle"
    subtitleText.BackgroundTransparency = 1
    subtitleText.Position = UDim2.new(0, #title * 10 + 5, 0, 0)
    subtitleText.Size = UDim2.new(1, 0, 1, 0)
    subtitleText.Font = Enum.Font.Gotham
    subtitleText.Text = subtitle
    subtitleText.TextColor3 = Colors.TextSecondary
    subtitleText.TextSize = 16
    subtitleText.TextXAlignment = Enum.TextXAlignment.Left
    subtitleText.Parent = titleContainer
    
    -- Tab Container
    local tabContainer = Instance.new("Frame")
    tabContainer.Name = "TabContainer"
    tabContainer.BackgroundTransparency = 1
    tabContainer.Position = UDim2.new(0, 220, 0, 0)
    tabContainer.Size = UDim2.new(1, -280, 1, 0)
    tabContainer.Parent = topBar
    
    local tabLayout = Instance.new("UIListLayout")
    tabLayout.FillDirection = Enum.FillDirection.Horizontal
    tabLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left
    tabLayout.VerticalAlignment = Enum.VerticalAlignment.Center
    tabLayout.Padding = UDim.new(0, 0)
    tabLayout.Parent = tabContainer
    
    -- Close Button
    local closeBtn = Instance.new("TextButton")
    closeBtn.Name = "CloseButton"
    closeBtn.BackgroundTransparency = 1
    closeBtn.Position = UDim2.new(1, -45, 0, 10)
    closeBtn.Size = UDim2.new(0, 30, 0, 30)
    closeBtn.Font = Enum.Font.GothamBold
    closeBtn.Text = "×"
    closeBtn.TextColor3 = Colors.TextSecondary
    closeBtn.TextSize = 24
    closeBtn.Parent = topBar
    
    closeBtn.MouseEnter:Connect(function()
        CreateTween(closeBtn, 0.15, {TextColor3 = Colors.Error}):Play()
    end)
    
    closeBtn.MouseLeave:Connect(function()
        CreateTween(closeBtn, 0.15, {TextColor3 = Colors.TextSecondary}):Play()
    end)
    
    closeBtn.MouseButton1Click:Connect(function()
        AzrixLibrary.Visible = false
        mainFrame.Visible = false
    end)
    
    -- Minimize Button
    local minimizeBtn = Instance.new("TextButton")
    minimizeBtn.Name = "MinimizeButton"
    minimizeBtn.BackgroundTransparency = 1
    minimizeBtn.Position = UDim2.new(1, -75, 0, 10)
    minimizeBtn.Size = UDim2.new(0, 30, 0, 30)
    minimizeBtn.Font = Enum.Font.GothamBold
    minimizeBtn.Text = "−"
    minimizeBtn.TextColor3 = Colors.TextSecondary
    minimizeBtn.TextSize = 24
    minimizeBtn.Parent = topBar
    
    minimizeBtn.MouseEnter:Connect(function()
        CreateTween(minimizeBtn, 0.15, {TextColor3 = Colors.Accent}):Play()
    end)
    
    minimizeBtn.MouseLeave:Connect(function()
        CreateTween(minimizeBtn, 0.15, {TextColor3 = Colors.TextSecondary}):Play()
    end)
    
    -- Content Area
    local contentArea = Instance.new("Frame")
    contentArea.Name = "ContentArea"
    contentArea.BackgroundColor3 = Colors.BackgroundLight
    contentArea.BorderSizePixel = 0
    contentArea.Position = UDim2.new(0, 10, 0, 60)
    contentArea.Size = UDim2.new(1, -20, 1, -70)
    contentArea.Parent = mainFrame
    
    AddCorner(contentArea, 4)
    
    -- Dragging
    local dragging = false
    local dragStart = nil
    local startPos = nil
    
    topBar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = mainFrame.Position
        end
    end)
    
    topBar.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = false
        end
    end)
    
    UserInputService.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            local delta = input.Position - dragStart
            mainFrame.Position = UDim2.new(
                startPos.X.Scale,
                startPos.X.Offset + delta.X,
                startPos.Y.Scale,
                startPos.Y.Offset + delta.Y
            )
        end
    end)
    
    -- ═══════════════════════════════════════════════════════════════════
    -- TAB CREATION
    -- ═══════════════════════════════════════════════════════════════════
    
    function Window:Tab(options)
        options = options or {}
        local name = options.Name or "Tab"
        local icon = options.Icon or nil
        
        local Tab = {}
        Tab.Sections = {Left = {}, Right = {}}
        
        -- Tab Button
        local tabBtn = Instance.new("TextButton")
        tabBtn.Name = name .. "Tab"
        tabBtn.BackgroundColor3 = Colors.TabInactive
        tabBtn.BackgroundTransparency = 1
        tabBtn.BorderSizePixel = 0
        tabBtn.Size = UDim2.new(0, 100, 1, 0)
        tabBtn.Font = Enum.Font.Gotham
        tabBtn.Text = name:upper()
        tabBtn.TextColor3 = Colors.TextSecondary
        tabBtn.TextSize = 12
        tabBtn.Parent = tabContainer
        
        -- Active Indicator
        local activeIndicator = Instance.new("Frame")
        activeIndicator.Name = "ActiveIndicator"
        activeIndicator.BackgroundColor3 = Colors.Accent
        activeIndicator.BorderSizePixel = 0
        activeIndicator.Position = UDim2.new(0, 0, 1, -2)
        activeIndicator.Size = UDim2.new(1, 0, 0, 2)
        activeIndicator.Visible = false
        activeIndicator.Parent = tabBtn
        
        -- Tab Content
        local tabContent = Instance.new("Frame")
        tabContent.Name = name .. "Content"
        tabContent.BackgroundTransparency = 1
        tabContent.Size = UDim2.new(1, 0, 1, 0)
        tabContent.Visible = false
        tabContent.Parent = contentArea
        
        -- Left Column
        local leftColumn = Instance.new("ScrollingFrame")
        leftColumn.Name = "LeftColumn"
        leftColumn.BackgroundTransparency = 1
        leftColumn.BorderSizePixel = 0
        leftColumn.Position = UDim2.new(0, 5, 0, 5)
        leftColumn.Size = UDim2.new(0.5, -10, 1, -10)
        leftColumn.CanvasSize = UDim2.new(0, 0, 0, 0)
        leftColumn.ScrollBarThickness = 3
        leftColumn.ScrollBarImageColor3 = Colors.Accent
        leftColumn.AutomaticCanvasSize = Enum.AutomaticSize.Y
        leftColumn.Parent = tabContent
        
        AddListLayout(leftColumn, 8)
        AddPadding(leftColumn, 5)
        
        -- Right Column
        local rightColumn = Instance.new("ScrollingFrame")
        rightColumn.Name = "RightColumn"
        rightColumn.BackgroundTransparency = 1
        rightColumn.BorderSizePixel = 0
        rightColumn.Position = UDim2.new(0.5, 5, 0, 5)
        rightColumn.Size = UDim2.new(0.5, -10, 1, -10)
        rightColumn.CanvasSize = UDim2.new(0, 0, 0, 0)
        rightColumn.ScrollBarThickness = 3
        rightColumn.ScrollBarImageColor3 = Colors.Accent
        rightColumn.AutomaticCanvasSize = Enum.AutomaticSize.Y
        rightColumn.Parent = tabContent
        
        AddListLayout(rightColumn, 8)
        AddPadding(rightColumn, 5)
        
        -- Tab Selection
        local function SelectTab()
            for _, tab in pairs(Window.Tabs) do
                tab.Button.TextColor3 = Colors.TextSecondary
                tab.Indicator.Visible = false
                tab.Content.Visible = false
            end
            
            tabBtn.TextColor3 = Colors.TextPrimary
            activeIndicator.Visible = true
            tabContent.Visible = true
            Window.ActiveTab = Tab
        end
        
        tabBtn.MouseButton1Click:Connect(SelectTab)
        
        tabBtn.MouseEnter:Connect(function()
            if Window.ActiveTab ~= Tab then
                CreateTween(tabBtn, 0.15, {TextColor3 = Colors.TextPrimary}):Play()
            end
        end)
        
        tabBtn.MouseLeave:Connect(function()
            if Window.ActiveTab ~= Tab then
                CreateTween(tabBtn, 0.15, {TextColor3 = Colors.TextSecondary}):Play()
            end
        end)
        
        -- ═══════════════════════════════════════════════════════════════
        -- SECTION CREATION
        -- ═══════════════════════════════════════════════════════════════
        
        function Tab:Section(options)
            options = options or {}
            local sectionName = options.Name or "Section"
            local side = options.Side or "Left"
            
            local Section = {}
            local column = side == "Left" and leftColumn or rightColumn
            
            -- Section Frame
            local sectionFrame = Instance.new("Frame")
            sectionFrame.Name = sectionName
            sectionFrame.BackgroundColor3 = Colors.Panel
            sectionFrame.BorderSizePixel = 0
            sectionFrame.Size = UDim2.new(1, -10, 0, 0)
            sectionFrame.AutomaticSize = Enum.AutomaticSize.Y
            sectionFrame.Parent = column
            
            AddCorner(sectionFrame, 4)
            AddStroke(sectionFrame, Colors.PanelBorder)
            
            -- Section Header
            local sectionHeader = Instance.new("Frame")
            sectionHeader.Name = "Header"
            sectionHeader.BackgroundColor3 = Colors.PanelHeader
            sectionHeader.BorderSizePixel = 0
            sectionHeader.Size = UDim2.new(1, 0, 0, 28)
            sectionHeader.Parent = sectionFrame
            
            local headerCorner = Instance.new("UICorner")
            headerCorner.CornerRadius = UDim.new(0, 4)
            headerCorner.Parent = sectionHeader
            
            -- Fix bottom corners
            local headerFix = Instance.new("Frame")
            headerFix.Name = "CornerFix"
            headerFix.BackgroundColor3 = Colors.PanelHeader
            headerFix.BorderSizePixel = 0
            headerFix.Position = UDim2.new(0, 0, 1, -4)
            headerFix.Size = UDim2.new(1, 0, 0, 4)
            headerFix.Parent = sectionHeader
            
            local headerLabel = Instance.new("TextLabel")
            headerLabel.Name = "Title"
            headerLabel.BackgroundTransparency = 1
            headerLabel.Position = UDim2.new(0, 10, 0, 0)
            headerLabel.Size = UDim2.new(1, -20, 1, 0)
            headerLabel.Font = Enum.Font.GothamMedium
            headerLabel.Text = sectionName:upper()
            headerLabel.TextColor3 = Colors.TextPrimary
            headerLabel.TextSize = 11
            headerLabel.TextXAlignment = Enum.TextXAlignment.Left
            headerLabel.Parent = sectionHeader
            
            -- Content Container
            local sectionContent = Instance.new("Frame")
            sectionContent.Name = "Content"
            sectionContent.BackgroundTransparency = 1
            sectionContent.Position = UDim2.new(0, 0, 0, 28)
            sectionContent.Size = UDim2.new(1, 0, 0, 0)
            sectionContent.AutomaticSize = Enum.AutomaticSize.Y
            sectionContent.Parent = sectionFrame
            
            local contentLayout = AddListLayout(sectionContent, 2)
            local contentPadding = Instance.new("UIPadding")
            contentPadding.PaddingTop = UDim.new(0, 6)
            contentPadding.PaddingBottom = UDim.new(0, 8)
            contentPadding.PaddingLeft = UDim.new(0, 8)
            contentPadding.PaddingRight = UDim.new(0, 8)
            contentPadding.Parent = sectionContent
            
            -- ═══════════════════════════════════════════════════════════
            -- ELEMENT CREATION FUNCTIONS
            -- ═══════════════════════════════════════════════════════════
            
            -- Toggle
            function Section:Toggle(options)
                options = options or {}
                local toggleName = options.Name or "Toggle"
                local flag = options.Flag or toggleName
                local default = options.Default or false
                local callback = options.Callback or function() end
                
                local Toggle = {}
                
                AzrixLibrary.Flags[flag] = default
                
                local toggleFrame = Instance.new("Frame")
                toggleFrame.Name = toggleName
                toggleFrame.BackgroundTransparency = 1
                toggleFrame.Size = UDim2.new(1, 0, 0, 28)
                toggleFrame.Parent = sectionContent
                
                local toggleLabel = Instance.new("TextLabel")
                toggleLabel.Name = "Label"
                toggleLabel.BackgroundTransparency = 1
                toggleLabel.Position = UDim2.new(0, 0, 0, 0)
                toggleLabel.Size = UDim2.new(1, -50, 1, 0)
                toggleLabel.Font = Enum.Font.Gotham
                toggleLabel.Text = toggleName
                toggleLabel.TextColor3 = Colors.TextPrimary
                toggleLabel.TextSize = 12
                toggleLabel.TextXAlignment = Enum.TextXAlignment.Left
                toggleLabel.Parent = toggleFrame
                
                local toggleBg = Instance.new("Frame")
                toggleBg.Name = "ToggleBg"
                toggleBg.BackgroundColor3 = default and Colors.ToggleEnabled or Colors.Toggle
                toggleBg.BorderSizePixel = 0
                toggleBg.Position = UDim2.new(1, -40, 0.5, -9)
                toggleBg.Size = UDim2.new(0, 36, 0, 18)
                toggleBg.Parent = toggleFrame
                
                AddCorner(toggleBg, 9)
                AddStroke(toggleBg, Colors.PanelBorder)
                
                local toggleCircle = Instance.new("Frame")
                toggleCircle.Name = "Circle"
                toggleCircle.BackgroundColor3 = Colors.TextPrimary
                toggleCircle.BorderSizePixel = 0
                toggleCircle.Position = default and UDim2.new(1, -16, 0.5, -7) or UDim2.new(0, 2, 0.5, -7)
                toggleCircle.Size = UDim2.new(0, 14, 0, 14)
                toggleCircle.Parent = toggleBg
                
                AddCorner(toggleCircle, 7)
                
                local function SetValue(value)
                    AzrixLibrary.Flags[flag] = value
                    
                    if value then
                        CreateTween(toggleBg, 0.2, {BackgroundColor3 = Colors.ToggleEnabled}):Play()
                        CreateTween(toggleCircle, 0.2, {Position = UDim2.new(1, -16, 0.5, -7)}):Play()
                    else
                        CreateTween(toggleBg, 0.2, {BackgroundColor3 = Colors.Toggle}):Play()
                        CreateTween(toggleCircle, 0.2, {Position = UDim2.new(0, 2, 0.5, -7)}):Play()
                    end
                    
                    callback(value)
                end
                
                local toggleBtn = Instance.new("TextButton")
                toggleBtn.Name = "Button"
                toggleBtn.BackgroundTransparency = 1
                toggleBtn.Size = UDim2.new(1, 0, 1, 0)
                toggleBtn.Text = ""
                toggleBtn.Parent = toggleFrame
                
                toggleBtn.MouseButton1Click:Connect(function()
                    SetValue(not AzrixLibrary.Flags[flag])
                end)
                
                function Toggle:Set(value)
                    SetValue(value)
                end
                
                function Toggle:Get()
                    return AzrixLibrary.Flags[flag]
                end
                
                -- Keybind attachment for Toggle
                function Toggle:Keybind(kbOptions)
                    kbOptions = kbOptions or {}
                    local kbFlag = kbOptions.Flag or flag .. "_Keybind"
                    local defaultKey = kbOptions.Key or Enum.KeyCode.None
                    local mode = kbOptions.Mode or "Toggle"
                    local kbCallback = kbOptions.Callback or function() end
                    
                    AzrixLibrary.Flags[kbFlag] = {Key = defaultKey, Mode = mode}
                    
                    local keybindBtn = Instance.new("TextButton")
                    keybindBtn.Name = "Keybind"
                    keybindBtn.BackgroundColor3 = Colors.Input
                    keybindBtn.BorderSizePixel = 0
                    keybindBtn.Position = UDim2.new(1, -85, 0.5, -9)
                    keybindBtn.Size = UDim2.new(0, 40, 0, 18)
                    keybindBtn.Font = Enum.Font.Gotham
                    keybindBtn.Text = defaultKey == Enum.KeyCode.None and "..." or defaultKey.Name
                    keybindBtn.TextColor3 = Colors.TextSecondary
                    keybindBtn.TextSize = 10
                    keybindBtn.Parent = toggleFrame
                    
                    AddCorner(keybindBtn, 4)
                    AddStroke(keybindBtn, Colors.InputBorder)
                    
                    local listening = false
                    
                    keybindBtn.MouseButton1Click:Connect(function()
                        listening = true
                        keybindBtn.Text = "..."
                    end)
                    
                    local inputConn
                    inputConn = UserInputService.InputBegan:Connect(function(input, processed)
                        if listening then
                            if input.UserInputType == Enum.UserInputType.Keyboard then
                                AzrixLibrary.Flags[kbFlag].Key = input.KeyCode
                                keybindBtn.Text = input.KeyCode.Name
                                listening = false
                            end
                        elseif not processed then
                            if input.KeyCode == AzrixLibrary.Flags[kbFlag].Key then
                                if mode == "Toggle" then
                                    SetValue(not AzrixLibrary.Flags[flag])
                                    kbCallback(AzrixLibrary.Flags[flag])
                                elseif mode == "Hold" then
                                    SetValue(true)
                                    kbCallback(true)
                                end
                            end
                        end
                    end)
                    
                    if mode == "Hold" then
                        UserInputService.InputEnded:Connect(function(input)
                            if input.KeyCode == AzrixLibrary.Flags[kbFlag].Key then
                                SetValue(false)
                                kbCallback(false)
                            end
                        end)
                    end
                    
                    table.insert(AzrixLibrary.Connections, inputConn)
                    
                    return Toggle
                end
                
                if default then
                    callback(default)
                end
                
                return Toggle
            end
            
            -- Slider
            function Section:Slider(options)
                options = options or {}
                local sliderName = options.Name or "Slider"
                local flag = options.Flag or sliderName
                local min = options.Min or 0
                local max = options.Max or 100
                local default = options.Default or min
                local suffix = options.Suffix or ""
                local decimal = options.Decimal or 1
                local callback = options.Callback or function() end
                
                local Slider = {}
                
                AzrixLibrary.Flags[flag] = default
                
                local sliderFrame = Instance.new("Frame")
                sliderFrame.Name = sliderName
                sliderFrame.BackgroundTransparency = 1
                sliderFrame.Size = UDim2.new(1, 0, 0, 40)
                sliderFrame.Parent = sectionContent
                
                local sliderLabel = Instance.new("TextLabel")
                sliderLabel.Name = "Label"
                sliderLabel.BackgroundTransparency = 1
                sliderLabel.Size = UDim2.new(1, -60, 0, 20)
                sliderLabel.Font = Enum.Font.Gotham
                sliderLabel.Text = sliderName
                sliderLabel.TextColor3 = Colors.TextPrimary
                sliderLabel.TextSize = 12
                sliderLabel.TextXAlignment = Enum.TextXAlignment.Left
                sliderLabel.Parent = sliderFrame
                
                local valueLabel = Instance.new("TextLabel")
                valueLabel.Name = "Value"
                valueLabel.BackgroundTransparency = 1
                valueLabel.Position = UDim2.new(1, -55, 0, 0)
                valueLabel.Size = UDim2.new(0, 55, 0, 20)
                valueLabel.Font = Enum.Font.Gotham
                valueLabel.Text = tostring(default) .. suffix
                valueLabel.TextColor3 = Colors.Accent
                valueLabel.TextSize = 12
                valueLabel.TextXAlignment = Enum.TextXAlignment.Right
                valueLabel.Parent = sliderFrame
                
                local sliderBg = Instance.new("Frame")
                sliderBg.Name = "Background"
                sliderBg.BackgroundColor3 = Colors.Slider
                sliderBg.BorderSizePixel = 0
                sliderBg.Position = UDim2.new(0, 0, 0, 24)
                sliderBg.Size = UDim2.new(1, 0, 0, 12)
                sliderBg.Parent = sliderFrame
                
                AddCorner(sliderBg, 6)
                AddStroke(sliderBg, Colors.PanelBorder)
                
                local sliderFill = Instance.new("Frame")
                sliderFill.Name = "Fill"
                sliderFill.BackgroundColor3 = Colors.SliderFill
                sliderFill.BorderSizePixel = 0
                sliderFill.Size = UDim2.new((default - min) / (max - min), 0, 1, 0)
                sliderFill.Parent = sliderBg
                
                AddCorner(sliderFill, 6)
                
                local sliderKnob = Instance.new("Frame")
                sliderKnob.Name = "Knob"
                sliderKnob.BackgroundColor3 = Colors.TextPrimary
                sliderKnob.BorderSizePixel = 0
                sliderKnob.AnchorPoint = Vector2.new(0.5, 0.5)
                sliderKnob.Position = UDim2.new((default - min) / (max - min), 0, 0.5, 0)
                sliderKnob.Size = UDim2.new(0, 14, 0, 14)
                sliderKnob.ZIndex = 2
                sliderKnob.Parent = sliderBg
                
                AddCorner(sliderKnob, 7)
                
                local function SetValue(value)
                    value = math.clamp(value, min, max)
                    value = math.floor(value / decimal + 0.5) * decimal
                    
                    AzrixLibrary.Flags[flag] = value
                    valueLabel.Text = tostring(value) .. suffix
                    
                    local percent = (value - min) / (max - min)
                    CreateTween(sliderFill, 0.1, {Size = UDim2.new(percent, 0, 1, 0)}):Play()
                    CreateTween(sliderKnob, 0.1, {Position = UDim2.new(percent, 0, 0.5, 0)}):Play()
                    
                    callback(value)
                end
                
                local dragging = false
                
                sliderBg.InputBegan:Connect(function(input)
                    if input.UserInputType == Enum.UserInputType.MouseButton1 then
                        dragging = true
                        local percent = math.clamp((input.Position.X - sliderBg.AbsolutePosition.X) / sliderBg.AbsoluteSize.X, 0, 1)
                        SetValue(min + (max - min) * percent)
                    end
                end)
                
                sliderBg.InputEnded:Connect(function(input)
                    if input.UserInputType == Enum.UserInputType.MouseButton1 then
                        dragging = false
                    end
                end)
                
                UserInputService.InputChanged:Connect(function(input)
                    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
                        local percent = math.clamp((input.Position.X - sliderBg.AbsolutePosition.X) / sliderBg.AbsoluteSize.X, 0, 1)
                        SetValue(min + (max - min) * percent)
                    end
                end)
                
                function Slider:Set(value)
                    SetValue(value)
                end
                
                function Slider:Get()
                    return AzrixLibrary.Flags[flag]
                end
                
                return Slider
            end
            
            -- Dropdown
            function Section:Dropdown(options)
                options = options or {}
                local dropdownName = options.Name or "Dropdown"
                local flag = options.Flag or dropdownName
                local dropdownOptions = options.Options or {}
                local default = options.Default or (options.Multi and {} or dropdownOptions[1])
                local multi = options.Multi or false
                local callback = options.Callback or function() end
                
                local Dropdown = {}
                local isOpen = false
                
                AzrixLibrary.Flags[flag] = default
                
                local dropdownFrame = Instance.new("Frame")
                dropdownFrame.Name = dropdownName
                dropdownFrame.BackgroundTransparency = 1
                dropdownFrame.Size = UDim2.new(1, 0, 0, 48)
                dropdownFrame.ClipsDescendants = true
                dropdownFrame.Parent = sectionContent
                
                local dropdownLabel = Instance.new("TextLabel")
                dropdownLabel.Name = "Label"
                dropdownLabel.BackgroundTransparency = 1
                dropdownLabel.Size = UDim2.new(1, 0, 0, 20)
                dropdownLabel.Font = Enum.Font.Gotham
                dropdownLabel.Text = dropdownName
                dropdownLabel.TextColor3 = Colors.TextPrimary
                dropdownLabel.TextSize = 12
                dropdownLabel.TextXAlignment = Enum.TextXAlignment.Left
                dropdownLabel.Parent = dropdownFrame
                
                local dropdownBtn = Instance.new("TextButton")
                dropdownBtn.Name = "Button"
                dropdownBtn.BackgroundColor3 = Colors.Dropdown
                dropdownBtn.BorderSizePixel = 0
                dropdownBtn.Position = UDim2.new(0, 0, 0, 22)
                dropdownBtn.Size = UDim2.new(1, 0, 0, 24)
                dropdownBtn.Font = Enum.Font.Gotham
                dropdownBtn.TextColor3 = Colors.TextSecondary
                dropdownBtn.TextSize = 11
                dropdownBtn.TextXAlignment = Enum.TextXAlignment.Left
                dropdownBtn.Parent = dropdownFrame
                
                local btnPadding = Instance.new("UIPadding")
                btnPadding.PaddingLeft = UDim.new(0, 8)
                btnPadding.Parent = dropdownBtn
                
                AddCorner(dropdownBtn, 4)
                AddStroke(dropdownBtn, Colors.InputBorder)
                
                local arrow = Instance.new("TextLabel")
                arrow.Name = "Arrow"
                arrow.BackgroundTransparency = 1
                arrow.Position = UDim2.new(1, -20, 0, 0)
                arrow.Size = UDim2.new(0, 20, 1, 0)
                arrow.Font = Enum.Font.GothamBold
                arrow.Text = "▼"
                arrow.TextColor3 = Colors.TextSecondary
                arrow.TextSize = 8
                arrow.Parent = dropdownBtn
                
                local optionContainer = Instance.new("Frame")
                optionContainer.Name = "Options"
                optionContainer.BackgroundColor3 = Colors.Dropdown
                optionContainer.BorderSizePixel = 0
                optionContainer.Position = UDim2.new(0, 0, 0, 48)
                optionContainer.Size = UDim2.new(1, 0, 0, 0)
                optionContainer.ClipsDescendants = true
                optionContainer.Visible = false
                optionContainer.Parent = dropdownFrame
                
                AddCorner(optionContainer, 4)
                AddStroke(optionContainer, Colors.InputBorder)
                
                local optionLayout = AddListLayout(optionContainer, 0)
                
                local function GetDisplayText()
                    if multi then
                        local selected = AzrixLibrary.Flags[flag]
                        if #selected == 0 then
                            return "None Selected"
                        elseif #selected <= 2 then
                            return table.concat(selected, ", ")
                        else
                            return selected[1] .. ", " .. selected[2] .. " + " .. (#selected - 2)
                        end
                    else
                        return AzrixLibrary.Flags[flag] or "None"
                    end
                end
                
                dropdownBtn.Text = GetDisplayText()
                
                local function RefreshOptions(newOptions)
                    for _, child in pairs(optionContainer:GetChildren()) do
                        if child:IsA("TextButton") then
                            child:Destroy()
                        end
                    end
                    
                    dropdownOptions = newOptions
                    
                    for i, option in ipairs(dropdownOptions) do
                        local optionBtn = Instance.new("TextButton")
                        optionBtn.Name = option
                        optionBtn.BackgroundColor3 = Colors.Dropdown
                        optionBtn.BackgroundTransparency = 1
                        optionBtn.BorderSizePixel = 0
                        optionBtn.Size = UDim2.new(1, 0, 0, 24)
                        optionBtn.Font = Enum.Font.Gotham
                        optionBtn.Text = "  " .. option
                        optionBtn.TextColor3 = Colors.TextSecondary
                        optionBtn.TextSize = 11
                        optionBtn.TextXAlignment = Enum.TextXAlignment.Left
                        optionBtn.LayoutOrder = i
                        optionBtn.Parent = optionContainer
                        
                        optionBtn.MouseEnter:Connect(function()
                            CreateTween(optionBtn, 0.1, {BackgroundTransparency = 0, BackgroundColor3 = Colors.DropdownHover}):Play()
                        end)
                        
                        optionBtn.MouseLeave:Connect(function()
                            CreateTween(optionBtn, 0.1, {BackgroundTransparency = 1}):Play()
                        end)
                        
                        optionBtn.MouseButton1Click:Connect(function()
                            if multi then
                                local selected = AzrixLibrary.Flags[flag]
                                local index = table.find(selected, option)
                                if index then
                                    table.remove(selected, index)
                                else
                                    table.insert(selected, option)
                                end
                                AzrixLibrary.Flags[flag] = selected
                            else
                                AzrixLibrary.Flags[flag] = option
                                isOpen = false
                                optionContainer.Visible = false
                                CreateTween(dropdownFrame, 0.2, {Size = UDim2.new(1, 0, 0, 48)}):Play()
                                CreateTween(arrow, 0.2, {Rotation = 0}):Play()
                            end
                            
                            dropdownBtn.Text = GetDisplayText()
                            callback(AzrixLibrary.Flags[flag])
                        end)
                    end
                end
                
                RefreshOptions(dropdownOptions)
                
                dropdownBtn.MouseButton1Click:Connect(function()
                    isOpen = not isOpen
                    
                    if isOpen then
                        optionContainer.Visible = true
                        local targetHeight = math.min(#dropdownOptions * 24, 120)
                        CreateTween(dropdownFrame, 0.2, {Size = UDim2.new(1, 0, 0, 48 + targetHeight + 4)}):Play()
                        CreateTween(optionContainer, 0.2, {Size = UDim2.new(1, 0, 0, targetHeight)}):Play()
                        CreateTween(arrow, 0.2, {Rotation = 180}):Play()
                    else
                        CreateTween(dropdownFrame, 0.2, {Size = UDim2.new(1, 0, 0, 48)}):Play()
                        CreateTween(optionContainer, 0.2, {Size = UDim2.new(1, 0, 0, 0)}):Play()
                        CreateTween(arrow, 0.2, {Rotation = 0}):Play()
                        task.delay(0.2, function()
                            optionContainer.Visible = false
                        end)
                    end
                end)
                
                function Dropdown:Set(value)
                    AzrixLibrary.Flags[flag] = value
                    dropdownBtn.Text = GetDisplayText()
                    callback(value)
                end
                
                function Dropdown:Get()
                    return AzrixLibrary.Flags[flag]
                end
                
                Dropdown.RefreshOptions = RefreshOptions
                
                return Dropdown
            end
            
            -- Textbox
            function Section:Textbox(options)
                options = options or {}
                local textboxName = options.Name or "Textbox"
                local flag = options.Flag or textboxName
                local placeholder = options.PlaceHolder or ""
                local default = options.Default or ""
                local callback = options.Callback or function() end
                
                local Textbox = {}
                
                AzrixLibrary.Flags[flag] = default
                
                local textboxFrame = Instance.new("Frame")
                textboxFrame.Name = textboxName
                textboxFrame.BackgroundTransparency = 1
                textboxFrame.Size = UDim2.new(1, 0, 0, 48)
                textboxFrame.Parent = sectionContent
                
                local textboxLabel = Instance.new("TextLabel")
                textboxLabel.Name = "Label"
                textboxLabel.BackgroundTransparency = 1
                textboxLabel.Size = UDim2.new(1, 0, 0, 20)
                textboxLabel.Font = Enum.Font.Gotham
                textboxLabel.Text = textboxName
                textboxLabel.TextColor3 = Colors.TextPrimary
                textboxLabel.TextSize = 12
                textboxLabel.TextXAlignment = Enum.TextXAlignment.Left
                textboxLabel.Parent = textboxFrame
                
                local textbox = Instance.new("TextBox")
                textbox.Name = "Input"
                textbox.BackgroundColor3 = Colors.Input
                textbox.BorderSizePixel = 0
                textbox.Position = UDim2.new(0, 0, 0, 22)
                textbox.Size = UDim2.new(1, 0, 0, 24)
                textbox.Font = Enum.Font.Gotham
                textbox.PlaceholderText = placeholder
                textbox.PlaceholderColor3 = Colors.TextDisabled
                textbox.Text = default
                textbox.TextColor3 = Colors.TextPrimary
                textbox.TextSize = 11
                textbox.ClearTextOnFocus = false
                textbox.Parent = textboxFrame
                
                local tbPadding = Instance.new("UIPadding")
                tbPadding.PaddingLeft = UDim.new(0, 8)
                tbPadding.PaddingRight = UDim.new(0, 8)
                tbPadding.Parent = textbox
                
                AddCorner(textbox, 4)
                local tbStroke = AddStroke(textbox, Colors.InputBorder)
                
                textbox.Focused:Connect(function()
                    CreateTween(tbStroke, 0.15, {Color = Colors.InputFocused}):Play()
                end)
                
                textbox.FocusLost:Connect(function()
                    CreateTween(tbStroke, 0.15, {Color = Colors.InputBorder}):Play()
                    AzrixLibrary.Flags[flag] = textbox.Text
                    callback(textbox.Text)
                end)
                
                function Textbox:Set(value)
                    textbox.Text = value
                    AzrixLibrary.Flags[flag] = value
                    callback(value)
                end
                
                function Textbox:Get()
                    return AzrixLibrary.Flags[flag]
                end
                
                return Textbox
            end
            
            -- Button
            function Section:Button(options)
                options = options or {}
                local buttonName = options.Name or "Button"
                local callback = options.Callback or function() end
                
                local Button = {}
                
                local buttonFrame = Instance.new("TextButton")
                buttonFrame.Name = buttonName
                buttonFrame.BackgroundColor3 = Colors.Accent
                buttonFrame.BorderSizePixel = 0
                buttonFrame.Size = UDim2.new(1, 0, 0, 28)
                buttonFrame.Font = Enum.Font.GothamMedium
                buttonFrame.Text = buttonName
                buttonFrame.TextColor3 = Colors.TextPrimary
                buttonFrame.TextSize = 12
                buttonFrame.ClipsDescendants = true
                buttonFrame.Parent = sectionContent
                
                AddCorner(buttonFrame, 4)
                
                buttonFrame.MouseEnter:Connect(function()
                    CreateTween(buttonFrame, 0.15, {BackgroundColor3 = Colors.AccentLight}):Play()
                end)
                
                buttonFrame.MouseLeave:Connect(function()
                    CreateTween(buttonFrame, 0.15, {BackgroundColor3 = Colors.Accent}):Play()
                end)
                
                buttonFrame.MouseButton1Click:Connect(function()
                    Ripple(buttonFrame, Mouse.X, Mouse.Y)
                    callback()
                end)
                
                return Button
            end
            
            -- Label
            function Section:Label(options)
                options = options or {}
                local labelText = options.Name or "Label"
                
                local Label = {}
                
                local labelFrame = Instance.new("TextLabel")
                labelFrame.Name = "Label"
                labelFrame.BackgroundTransparency = 1
                labelFrame.Size = UDim2.new(1, 0, 0, 20)
                labelFrame.Font = Enum.Font.Gotham
                labelFrame.Text = labelText
                labelFrame.TextColor3 = Colors.TextSecondary
                labelFrame.TextSize = 11
                labelFrame.TextXAlignment = Enum.TextXAlignment.Left
                labelFrame.TextWrapped = true
                labelFrame.AutomaticSize = Enum.AutomaticSize.Y
                labelFrame.Parent = sectionContent
                
                function Label:Set(text)
                    labelFrame.Text = text
                end
                
                return Label
            end
            
            -- Colorpicker (standalone and attachment)
            function Section:Colorpicker(options)
                options = options or {}
                local colorName = options.Name or "Color"
                local flag = options.Flag or colorName
                local defaultColor = options.Color or Color3.fromRGB(255, 255, 255)
                local defaultAlpha = options.Alpha or 1
                local callback = options.Callback or function() end
                
                AzrixLibrary.Flags[flag] = {Color = defaultColor, Alpha = defaultAlpha}
                
                local colorFrame = Instance.new("Frame")
                colorFrame.Name = colorName
                colorFrame.BackgroundTransparency = 1
                colorFrame.Size = UDim2.new(1, 0, 0, 28)
                colorFrame.Parent = sectionContent
                
                local colorLabel = Instance.new("TextLabel")
                colorLabel.Name = "Label"
                colorLabel.BackgroundTransparency = 1
                colorLabel.Size = UDim2.new(1, -35, 1, 0)
                colorLabel.Font = Enum.Font.Gotham
                colorLabel.Text = colorName
                colorLabel.TextColor3 = Colors.TextPrimary
                colorLabel.TextSize = 12
                colorLabel.TextXAlignment = Enum.TextXAlignment.Left
                colorLabel.Parent = colorFrame
                
                local colorBtn = Instance.new("TextButton")
                colorBtn.Name = "ColorButton"
                colorBtn.BackgroundColor3 = defaultColor
                colorBtn.BorderSizePixel = 0
                colorBtn.Position = UDim2.new(1, -30, 0.5, -10)
                colorBtn.Size = UDim2.new(0, 30, 0, 20)
                colorBtn.Text = ""
                colorBtn.Parent = colorFrame
                
                AddCorner(colorBtn, 4)
                AddStroke(colorBtn, Colors.PanelBorder)
                
                -- Simple color picker popup (simplified for this example)
                colorBtn.MouseButton1Click:Connect(function()
                    -- For now, just cycle through some preset colors
                    local colors = {
                        Color3.fromRGB(255, 0, 0),
                        Color3.fromRGB(0, 255, 0),
                        Color3.fromRGB(0, 0, 255),
                        Color3.fromRGB(255, 255, 0),
                        Color3.fromRGB(255, 0, 255),
                        Color3.fromRGB(0, 255, 255),
                        Color3.fromRGB(255, 255, 255),
                        Color3.fromRGB(170, 120, 50)
                    }
                    
                    local currentIndex = 1
                    for i, c in ipairs(colors) do
                        if c == colorBtn.BackgroundColor3 then
                            currentIndex = i
                            break
                        end
                    end
                    
                    local nextColor = colors[(currentIndex % #colors) + 1]
                    colorBtn.BackgroundColor3 = nextColor
                    AzrixLibrary.Flags[flag] = {Color = nextColor, Alpha = defaultAlpha}
                    callback(nextColor, defaultAlpha)
                end)
                
                return {
                    Set = function(self, color, alpha)
                        colorBtn.BackgroundColor3 = color
                        AzrixLibrary.Flags[flag] = {Color = color, Alpha = alpha or defaultAlpha}
                        callback(color, alpha or defaultAlpha)
                    end,
                    Get = function(self)
                        return AzrixLibrary.Flags[flag]
                    end
                }
            end
            
            return Section
        end
        
        -- Store tab references
        table.insert(Window.Tabs, {
            Button = tabBtn,
            Indicator = activeIndicator,
            Content = tabContent,
            Tab = Tab
        })
        
        -- Select first tab by default
        if #Window.Tabs == 1 then
            SelectTab()
        end
        
        return Tab
    end
    
    -- Config Section for Settings tab
    function Window:ConfigSection(tab)
        local ConfigSection = tab:Section({
            Name = "Configuration",
            Side = "Left"
        })
        
        local configNameBox
        local configDropdown
        
        configNameBox = ConfigSection:Textbox({
            Name = "Config Name",
            Flag = "ConfigName",
            PlaceHolder = "Enter config name...",
            Default = "default"
        })
        
        ConfigSection:Button({
            Name = "Save Config",
            Callback = function()
                local name = AzrixLibrary.Flags.ConfigName or "default"
                if AzrixLibrary:SaveConfig(name) then
                    AzrixLibrary.Notifications:Create({
                        Name = "Config saved: " .. name,
                        Type = "Success",
                        Lifetime = 2
                    })
                    if configDropdown then
                        configDropdown.RefreshOptions(AzrixLibrary:GetConfigs())
                    end
                else
                    AzrixLibrary.Notifications:Create({
                        Name = "Failed to save config",
                        Type = "Error",
                        Lifetime = 2
                    })
                end
            end
        })
        
        configDropdown = ConfigSection:Dropdown({
            Name = "Load Config",
            Flag = "SelectedConfig",
            Options = AzrixLibrary:GetConfigs(),
            Callback = function(option)
                -- Just select, don't load yet
            end
        })
        
        ConfigSection:Button({
            Name = "Load Selected Config",
            Callback = function()
                local name = AzrixLibrary.Flags.SelectedConfig
                if name and AzrixLibrary:LoadConfig(name) then
                    AzrixLibrary.Notifications:Create({
                        Name = "Config loaded: " .. name,
                        Type = "Success",
                        Lifetime = 2
                    })
                else
                    AzrixLibrary.Notifications:Create({
                        Name = "Failed to load config",
                        Type = "Error",
                        Lifetime = 2
                    })
                end
            end
        })
        
        ConfigSection:Button({
            Name = "Refresh Configs",
            Callback = function()
                configDropdown.RefreshOptions(AzrixLibrary:GetConfigs())
                AzrixLibrary.Notifications:Create({
                    Name = "Configs refreshed",
                    Lifetime = 2
                })
            end
        })
        
        ConfigSection:Button({
            Name = "Delete Selected Config",
            Callback = function()
                local name = AzrixLibrary.Flags.SelectedConfig
                if name and AzrixLibrary:DeleteConfig(name) then
                    AzrixLibrary.Notifications:Create({
                        Name = "Config deleted: " .. name,
                        Type = "Success",
                        Lifetime = 2
                    })
                    configDropdown.RefreshOptions(AzrixLibrary:GetConfigs())
                else
                    AzrixLibrary.Notifications:Create({
                        Name = "Failed to delete config",
                        Type = "Error",
                        Lifetime = 2
                    })
                end
            end
        })
    end
    
    -- Toggle Key Handler
    UserInputService.InputBegan:Connect(function(input, processed)
        if processed then return end
        if input.KeyCode == AzrixLibrary.ToggleKey then
            AzrixLibrary.Visible = not AzrixLibrary.Visible
            mainFrame.Visible = AzrixLibrary.Visible
        end
    end)
    
    -- Unload function
    function AzrixLibrary:Unload()
        for _, conn in pairs(self.Connections) do
            conn:Disconnect()
        end
        screenGui:Destroy()
    end
    
    Window.ScreenGui = screenGui
    Window.MainFrame = mainFrame
    
    table.insert(AzrixLibrary.Windows, Window)
    
    return Window
end

-- ══════════════════════════════════════════════════════════════════════
-- AUTO LOAD CONFIG
-- ══════════════════════════════════════════════════════════════════════

function AzrixLibrary:AutoLoadConfig()
    if self.AutoLoad and self.AutoLoad ~= "" then
        task.delay(0.5, function()
            if self:LoadConfig(self.AutoLoad) then
                self.Notifications:Create({
                    Name = "Auto-loaded config: " .. self.AutoLoad,
                    Type = "Success",
                    Lifetime = 3
                })
            end
        end)
    end
end

return AzrixLibrary
